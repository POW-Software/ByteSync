<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:synchronizations="clr-namespace:ByteSync.ViewModels.Sessions.Synchronizations"
             xmlns:converters="clr-namespace:ByteSync.Services.Converters"
             xmlns:localizations="clr-namespace:ByteSync.Services.Localizations"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="200"
             x:Class="ByteSync.Views.Sessions.Synchronizations.SynchronizationStatisticsView">

    <Design.DataContext>
        <synchronizations:SynchronizationStatisticsViewModel />
    </Design.DataContext>

    <UserControl.Resources>
        <converters:FormatKbSizeConverter x:Key="FormatKbSizeConverter" />
    </UserControl.Resources>

    <UserControl.Styles>
        <Style Selector="Label.Description">
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="Margin" Value="0 0 24 0" />
        </Style>
    </UserControl.Styles>

    <WrapPanel HorizontalAlignment="Left" Margin="3 0 3 0" VerticalAlignment="Center" Orientation="Horizontal">
        <!-- Column 1: Time info -->
        <Grid Margin="0 12 36 0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Label Grid.Row="0" Grid.Column="0" Content="{localizations:Loc SynchronizationMain_Start}" Classes="Description" />
            <Label Grid.Row="0" Grid.Column="1" Content="{Binding StartDateTime, StringFormat={}{0:G}}" HorizontalContentAlignment="Right" />

            <Label Grid.Row="1" Grid.Column="0" Content="{localizations:Loc SynchronizationMain_ElapsedTime}" Classes="Description" />
            <Label Grid.Row="1" Grid.Column="1" Content="{Binding ElapsedTime, StringFormat={}{0:c}}" HorizontalContentAlignment="Right" />

            <Label Grid.Row="2" Grid.Column="0" Content="{localizations:Loc SynchronizationMain_RemainingTime}" Classes="Description" />
            <Label Grid.Row="2" Grid.Column="1" Content="{Binding RemainingTime, StringFormat={}{0:c}}" HorizontalContentAlignment="Right" />

            <Label Grid.Row="3" Grid.Column="0" Content="{Binding EstimatedEndDateTimeLabel}" Classes="Description" />
            <Label Grid.Row="3" Grid.Column="1" Content="{Binding EstimatedEndDateTime, StringFormat={}{0:G}}"
                   HorizontalContentAlignment="Right" />
        </Grid>

        <!-- Column 2: Actions -->
        <Grid Margin="0 12 36 0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Label Grid.Row="0" Grid.Column="0" Content="{localizations:Loc SynchronizationMain_HandledActions}" Classes="Description" />
            <Border Grid.Row="0" Grid.Column="1" HorizontalAlignment="Right" Classes="Badge">
                <StackPanel Orientation="Horizontal">
                    <Label Content="{Binding HandledActions}" HorizontalContentAlignment="Left" />
                    <Label Content="/" HorizontalContentAlignment="Left" />
                    <Label Content="{Binding TreatableActions}" HorizontalContentAlignment="Left" />
                </StackPanel>
            </Border>

            <Label Grid.Row="1" Grid.Column="0" Content="{localizations:Loc SynchronizationMain_Successes}" Classes="Description" />
            <Border Grid.Row="1" Grid.Column="1" HorizontalAlignment="Right" Classes="Badge">
                <Label Content="{Binding Successes}" HorizontalContentAlignment="Right" />
            </Border>

            <Label Grid.Row="2" Grid.Column="0" Content="{localizations:Loc SynchronizationMain_Errors}"
                   Classes="Description"
                   Classes.IsBold="{Binding HasErrors}" />
            <Border Grid.Row="2" Grid.Column="1" HorizontalAlignment="Right"
                    Classes="Badge"
                    Classes.Secondary="{Binding HasErrors}">
                <Label Content="{Binding Errors}" HorizontalContentAlignment="Right"
                       Classes.IsBold="{Binding HasErrors}" />
            </Border>
        </Grid>

        <!-- Column 3: Volumes -->
        <Grid Margin="0 12 0 0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Label Grid.Row="0" Grid.Column="0" Content="{localizations:Loc SynchronizationMain_SynchronizedVolume}" Classes="Description" />
            <Label Grid.Row="0" Grid.Column="1" Content="{Binding SynchronizedVolume, Converter={StaticResource FormatKbSizeConverter}}"
                   HorizontalContentAlignment="Right" />

            <Label Grid.Row="1" Grid.Column="0" Content="{localizations:Loc SynchronizationMain_UploadedVolume}" Classes="Description" />
            <Label Grid.Row="1" Grid.Column="1" Content="{Binding ActualUploadedVolume, Converter={StaticResource FormatKbSizeConverter}}"
                   HorizontalContentAlignment="Right" />

            <Label Grid.Row="2" Grid.Column="0" Content="{localizations:Loc SynchronizationMain_DownloadedVolume}" Classes="Description" />
            <Label Grid.Row="2" Grid.Column="1"
                   Content="{Binding ActualDownloadedVolume, Converter={StaticResource FormatKbSizeConverter}}"
                   HorizontalContentAlignment="Right" />

            <Label Grid.Row="3" Grid.Column="0" Content="{localizations:Loc SynchronizationMain_LocalCopyVolume}" Classes="Description" />
            <Label Grid.Row="3" Grid.Column="1"
                   Content="{Binding LocalCopyTransferredVolume, Converter={StaticResource FormatKbSizeConverter}}"
                   HorizontalContentAlignment="Right" />

            <Label Grid.Row="4" Grid.Column="0" Content="{localizations:Loc SynchronizationMain_TransferEfficiency}" Classes="Description" />
            <Label Grid.Row="4" Grid.Column="1" Content="{Binding TransferEfficiency, StringFormat={}{0:N1}Ã—}"
                   HorizontalContentAlignment="Right" />

            <Label Grid.Row="5" Grid.Column="0" Content="{localizations:Loc SynchronizationMain_DataReduction}" Classes="Description" />
            <Label Grid.Row="5" Grid.Column="1" Content="{Binding DataReduction, StringFormat={}{0:P2}}" HorizontalContentAlignment="Right" />
        </Grid>
    </WrapPanel>
</UserControl>